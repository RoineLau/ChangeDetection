# ChangeDetection
    基于双时相遥感影像的三种变化监测方法，包括PCA法、IR-MAD法与融合scSE注意力机制的PSPNet法。
1 算法原理
 1.1 主成分分析法
    主成分分析法（Principal Component Analysis，简称PCA）是一种常用的数据降维技术。其原理主要是通过正交变换，将可能存在相关性的变量转换为一组线性不相关的变量，这些变量被称为主成分。传统PCA法通过差分图来分析影像间的光谱特征差异，提取最能代表图像光谱属性的主成分分量来进行变化检测，从而构造差异影像。此方法能有效降低数据集的维数，实现数据压缩的同时尽可能多地保留遥感影像中的有用信息。然而，只对PCA变换后的一个主成分进行构造差异影像，得到的变化信息会有所缺漏。受文献[9]启发，本文尝试基于PCA的CVA法，首先对影像进行PCA变换，得到相关性很小的几个主分量；然后选取前3个主分量进行CVA分析，得到信息充足且噪声较少的差异影像。
在构建完差异影像后，对影像进行二值化显示，其原理如公式1：
![image](https://github.com/user-attachments/assets/c1f78c9e-92ff-4098-a30a-2279b1d122c2)
     式中，Ｘ代表各光谱变化差异图；Ｘ′表示阈值分割后的二值图；T是需要设置的阈值参数。
     对于阈值的设定，使用两种阈值选择方法进行尝试：
（1）Otus法：Otus法是一种自适应的阈值选择方法，也称为最大类间方差法或大津法。该方法基于图像的灰度直方图，通过计算类间方差来寻找最佳阈值，使得分割后的前景和背景之间的类间方差最大。Otsu算法的优点是能够自动根据图像的灰度分布确定阈值，对于双峰分布的图像效果较好，在图像分割和二值化处理中得到了广泛应用。
（2）快速局部阈值法：快速局部阈值法是一种基于局部特性的阈值选择方法。该方法首先对差异影像进行分块处理，对每个局部块计算其均值和标准差等统计量。然后，根据这些统计量确定每个块的阈值，通常可以设置为均值加上一个倍数的标准差。最后，将每个像素与其所在块的阈值进行比较，根据公式(1)进行二值化处理。局部阈值方法的优点是能够适应图像中不同区域的灰度变化，对于光照不均或存在噪声的图像效果较好。
本文的PCA算法通过将全局阈值选择与局部阈值选择方法结合起来，并融入了边缘检测，对差异矩阵进行多次阈值选择，生成了一个综合的变化检测图。由于全局阈值能够捕捉到大范围的变化趋势，局部阈值能够适应局部地表特征的变化，而边缘检测则能够突出显示地表特征的边缘变化，这种结合方法所生成的变化检测结果能够更全面地反映地表的变化情况。

 1.2 迭代加权多元变化检测算法
    传统的多元检测算法具有对被检测的数据要求较高、无法有效去除波段间相关性且抑制噪声效果差、需要在检测前或者显示检测结果时针对研究对象取舍波段等缺点，无法充分利用多（高）光谱数据的先天优势[10]。Morton Canty等[11]结合概率理论中的一种迭代算法——期望最大化（Expectation Maximization，EM）算法，提出了通过迭代计算自动获取变化阈值并检测变化与未变化像元的基于多变量正交变换的算法——迭代加权多元变化检测（Iteration Re-weight Multivariate Alteration Detection，IR-MAD）。该方法是一种自动非监督变化的监测方法，通过迭代地计算多变量差异（MAD）分量和卡方统计量，以增强对实际地物变化的敏感性，旨在从多时相遥感影像中提取辐射和光照差异对检测结果的影响最小的变化信息。
    IR-MAD算法的核心原理有：
1.典型相关分析（CCA）
    IR-MAD利用典型相关分析方法对两时相影像的波段进行联合分析，以最大化其相关性。对于两组影像数据X和Y，通过构建协方差矩阵S_11、S_22和S_12，求解其特征向量和特征值，得到影像的典型变量对U和V。这些变量对分别表示在第一时相和第二时相影像中具有最大相关性的线性组合。
2.多变量差异（MAD）分量
    计算MAD分量，即两组典型变量U和V的差异：
![image](https://github.com/user-attachments/assets/59b9112b-8e78-4a8b-8e84-8b9b05274f8e)
MAD分量能够有效消除影像间的辐射差异，仅保留可能由地物变化引起的差异。
3.卡方统计量计算
    对MAD分量的平方和进行加权累加，计算卡方统计量，用以描述变化程度。权重由典型相关系数（反映影像之间的辐射相似性）确定，典型相关系数越低，权重越大，从而突出真实变化的影响。
4.期望-最大化（EM）迭代
    基于初始的卡方统计量计算结果，对所有像素分配权重，用以重新评估MAD分量和卡方统计量。迭代步骤如下：
	（1）根据当前权重计算加权均值和协方差矩阵。
	（2）更新MAD分量和卡方统计量。
	（3）更新权重：对于卡方值大的像素（可能变化的像素），赋予较高权重；对于卡方值小的像素（可能无变化的像素），赋予较低权重。
	（4）重复以上步骤，直至权重变化小于设定阈值或达到最大迭代次数。

1.3 改进型PSP-Net建筑物变化检测算法
（1）scSE注意力机制模块
    scSE注意力机制是一种结合了通道压缩和激励（cSE）以及空间压缩和激励（sSE）两种注意力机制的新型注意力模块[13]。该机制旨在通过对输入特征图进行空间和通道上的重新校准，来提高卷积神经网络（CNN）的特征学习能力,使得模型能够聚焦于对变化检测至关重要的特征。scSE模块同时考虑了通道注意力和空间注意力，采用并联式组合的方式，将2个注意力机制得到的权重与特征图相乘最后再相加。注意力模块关注的是所有通道的全部信息，并且通过全局平均池化和卷积操作，对所有的通道特征权重进行注意力调整；空间注意力模块关注的是每一个通道的局部信息，利用卷积操作捕捉特征图的空间依赖性，生成一个空间权重图，以突出变化区域，对通道特征的局部信息进行注意力调整。图2是scSE注意力模块的结构，可以看出，sSE模块首先对特征图进行1×1×1卷积，将[C，H，W］变为[1，H，W］；然后使用sigmoid进行激活，得到空间注意力图;最后施加到原始特征图中，完成空间的信息校准。scSE模块首先将特征图通过全局平均池化，然后使用c2×1×1和c×1×1卷积进行信息处理，得到C维的向量；使用sigmoid函数进行归一化，得到对应的mask；最后通过channel-wise相乘，得到经过信息校准过的特征图[12]。
![image](https://github.com/user-attachments/assets/00dd7288-52e4-41d3-b4b6-0afbab9185b6)
（2）PSP-Net模型
    PSP-Net（Pyramid Scene Parsing Network）是一种用于场景解析的深度学习网络架构。其核心在于金字塔池化模块（Pyramid Pooling Module），该模块能够聚合不同区域的上下文信息，提升全局上下文特征的表达能力。PSP-Net模型的网络结构如图3[15]，其利用金字塔池化模块有效地聚合不同区域的上下文信息，提升获取全局信息的能力。PSP结构的功能在于其可以将获取的特征层进行划分，然后将划分后的网格进行平均池化，从而实现聚合不同区域的上下文信息。PSP-Net中将输入的特征层分别分为6×6、3×3、2×2和1×1的网格，分别对应图3中的绿色、蓝色、橙色和红色的输出。其中红色表示将整个输入的特征层进行平均池化；橙色表示将特征层划分为2×2的区域，然后对每个单独的区域进行平均池化；蓝色表示将特征层划分为3×3的区域，然后对每个单独的区域进行平均池化；绿色表示将特征层划分为6×6的区域，然后对每个单独的区域进行平均池化[14]。
![image](https://github.com/user-attachments/assets/51cf24ac-27a6-4744-a704-bdb2911a93d3)
    PSP-Net的金字塔池化模块能够捕获到不同尺度的上下文信息，这对于识别建筑物变化至关重要。通过全局上下文信息的引导，网络能够更准确地判断建筑物是否发生变化；同时，PSP-Net具有强大的特征提取能力，能够处理不同分辨率和复杂度的遥感影像，使得该模型在不同地区和不同时间段的建筑物变化检测中都具有较好的适应性。
